/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package ece651.riskgame.client;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import ece651.riskgame.shared.GameInfo;

public class App {
  //private TextPlayer player;
  //private String serverIp;
  
  public static void main(String[] args) throws IOException{
    //connect to server
    Socket serverSocket = null;
    ObjectInputStream socketIn = null;
    String ip = "vcm-25372.vm.duke.edu";
    int port = 1651;
    try {
      serverSocket = new Socket(ip, port);
      socketIn = new ObjectInputStream(serverSocket.getInputStream());
    } catch (UnknownHostException e) {
      System.err.println("Don't know about host: " + ip);
      System.exit(1);
    }
    System.out.println("Connection Estabilished");
    TextPlayer p = null;
    //recv allocated player color
    //recv GameInfo
    try {
      String color = (String) socketIn.readObject();
      System.out.println("Your color is " + color);
      GameInfo game = (GameInfo) socketIn.readObject();
      p = new TextPlayer(game, color);
    } catch (ClassNotFoundException e) {
      System.err.println("Class Not Found when reading Object through socket");
      System.exit(1);
    }

    System.out.print(p.display());

    socketIn.close();
    serverSocket.close();
    System.exit(0);
    }
}
